import 'select2';

import $ from 'jquery';

class ClassSelect2 {
  constructor() {
    this.svgIcons = {
      0: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0007 0.833496C15.0633 0.833496 19.1673 4.93755 19.1673 10.0002C19.1673 15.0628 15.0633 19.1668 10.0007 19.1668C4.93804 19.1668 0.833984 15.0628 0.833984 10.0002C0.833984 4.93755 4.93804 0.833496 10.0007 0.833496ZM17.435 10.9972C16.5515 11.4567 15.3879 11.841 14.0667 12.1059C13.8789 14.0242 13.4346 15.7177 12.7885 16.9649C15.2544 15.9769 17.0736 13.7173 17.435 10.9972ZM12.4892 10.6706C12.4968 10.4499 12.5007 10.2263 12.5007 10.0002C12.5007 5.82016 11.1726 2.50016 10.0007 2.50016C8.82865 2.50016 7.50065 5.82016 7.50065 10.0002C7.50065 10.2393 7.505 10.4756 7.51341 10.7086C8.29519 10.7904 9.13055 10.8335 10.0008 10.8335C10.8574 10.8335 11.698 10.773 12.4892 10.6706ZM14.1642 10.3786C14.1663 10.253 14.1673 10.1269 14.1673 10.0002C14.1673 7.22713 13.6627 4.72292 12.7885 3.03542C15.2687 4.0291 17.0947 6.30919 17.4411 9.05037C17.0488 9.49051 15.8119 10.0133 14.1642 10.3786ZM7.64973 12.3979C8.39736 12.4652 9.1848 12.5001 10.0008 12.5001C10.8035 12.5001 11.5944 12.4546 12.3551 12.3703C11.9792 15.3682 10.9398 17.5002 10.0007 17.5002C9.06437 17.5002 8.02853 15.3813 7.64973 12.3979ZM5.83861 10.4586C5.36037 10.3632 4.91465 10.2509 4.50767 10.1231C3.47381 9.79839 2.79823 9.40044 2.55538 9.08948C2.8893 6.33088 4.72081 4.03382 7.21278 3.03542C6.33862 4.72292 5.83398 7.22713 5.83398 10.0002C5.83398 10.1538 5.83553 10.3067 5.83861 10.4586ZM5.94159 12.1758C6.13328 14.0654 6.57454 15.7328 7.21278 16.9649C4.78959 15.9941 2.9909 13.7953 2.58644 11.1382C3.45599 11.5911 4.60341 11.9432 5.94159 12.1758Z"/>
    </svg>`,
      1: '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 3.333A3.333 3.333 0 1110 10a3.333 3.333 0 010-6.667zM10 5a1.667 1.667 0 100 3.333A1.667 1.667 0 0010 5zm0 5.834c2.226 0 6.667 1.108 6.667 3.333v2.5H3.334v-2.5c0-2.225 4.442-3.333 6.667-3.333zm0 1.583c-2.474 0-5.083 1.216-5.083 1.75v.917h10.167v-.917c0-.534-2.608-1.75-5.083-1.75z"/></svg>',
      2: '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 11.458c-1.95 0-5.834.975-5.834 2.917v1.458h11.667v-1.458c0-1.942-3.884-2.917-5.834-2.917zm-3.884 2.708c.7-.483 2.392-1.041 3.883-1.041 1.492 0 3.184.558 3.884 1.041H3.616zM7.499 10a2.92 2.92 0 002.917-2.917 2.92 2.92 0 00-2.917-2.917 2.92 2.92 0 00-2.916 2.917A2.92 2.92 0 007.499 10zm0-4.167c.692 0 1.25.558 1.25 1.25s-.558 1.25-1.25 1.25c-.691 0-1.25-.558-1.25-1.25s.559-1.25 1.25-1.25zm5.867 5.675c.967.7 1.633 1.634 1.633 2.867v1.458h3.334v-1.458c0-1.684-2.917-2.642-4.967-2.867zM12.499 10a2.92 2.92 0 002.917-2.917 2.92 2.92 0 00-2.917-2.917c-.45 0-.866.109-1.25.292.525.742.834 1.65.834 2.625 0 .975-.309 1.883-.834 2.625.384.184.8.292 1.25.292z"/></svg>',
      3: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path clip-rule="evenodd" d="M5.834 5.833v2.5h-.833c-.89 0-1.667.647-1.667 1.528v6.944c0 .881.776 1.528 1.667 1.528h10c.89 0 1.666-.647 1.666-1.528V9.861c0-.88-.776-1.528-1.666-1.528h-.834v-2.5a4.167 4.167 0 10-8.333 0zm6.667 0v2.5h-5v-2.5a2.5 2.5 0 015 0zM5 16.667V10h10v6.666H5zm5.833-3.334a.833.833 0 11-1.667 0 .833.833 0 011.667 0z"/></svg>',
      everyone:
        '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0007 0.833496C15.0633 0.833496 19.1673 4.93755 19.1673 10.0002C19.1673 15.0628 15.0633 19.1668 10.0007 19.1668C4.93804 19.1668 0.833984 15.0628 0.833984 10.0002C0.833984 4.93755 4.93804 0.833496 10.0007 0.833496ZM17.435 10.9972C16.5515 11.4567 15.3879 11.841 14.0667 12.1059C13.8789 14.0242 13.4346 15.7177 12.7885 16.9649C15.2544 15.9769 17.0736 13.7173 17.435 10.9972ZM12.4892 10.6706C12.4968 10.4499 12.5007 10.2263 12.5007 10.0002C12.5007 5.82016 11.1726 2.50016 10.0007 2.50016C8.82865 2.50016 7.50065 5.82016 7.50065 10.0002C7.50065 10.2393 7.505 10.4756 7.51341 10.7086C8.29519 10.7904 9.13055 10.8335 10.0008 10.8335C10.8574 10.8335 11.698 10.773 12.4892 10.6706ZM14.1642 10.3786C14.1663 10.253 14.1673 10.1269 14.1673 10.0002C14.1673 7.22713 13.6627 4.72292 12.7885 3.03542C15.2687 4.0291 17.0947 6.30919 17.4411 9.05037C17.0488 9.49051 15.8119 10.0133 14.1642 10.3786ZM7.64973 12.3979C8.39736 12.4652 9.1848 12.5001 10.0008 12.5001C10.8035 12.5001 11.5944 12.4546 12.3551 12.3703C11.9792 15.3682 10.9398 17.5002 10.0007 17.5002C9.06437 17.5002 8.02853 15.3813 7.64973 12.3979ZM5.83861 10.4586C5.36037 10.3632 4.91465 10.2509 4.50767 10.1231C3.47381 9.79839 2.79823 9.40044 2.55538 9.08948C2.8893 6.33088 4.72081 4.03382 7.21278 3.03542C6.33862 4.72292 5.83398 7.22713 5.83398 10.0002C5.83398 10.1538 5.83553 10.3067 5.83861 10.4586ZM5.94159 12.1758C6.13328 14.0654 6.57454 15.7328 7.21278 16.9649C4.78959 15.9941 2.9909 13.7953 2.58644 11.1382C3.45599 11.5911 4.60341 11.9432 5.94159 12.1758Z"/></svg>',
      followme:
        '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 11.458c-1.95 0-5.834.975-5.834 2.917v1.458h11.667v-1.458c0-1.942-3.884-2.917-5.834-2.917zm-3.884 2.708c.7-.483 2.392-1.041 3.883-1.041 1.492 0 3.184.558 3.884 1.041H3.616zM7.499 10a2.92 2.92 0 002.917-2.917 2.92 2.92 0 00-2.917-2.917 2.92 2.92 0 00-2.916 2.917A2.92 2.92 0 007.499 10zm0-4.167c.692 0 1.25.558 1.25 1.25s-.558 1.25-1.25 1.25c-.691 0-1.25-.558-1.25-1.25s.559-1.25 1.25-1.25zm5.867 5.675c.967.7 1.633 1.634 1.633 2.867v1.458h3.334v-1.458c0-1.684-2.917-2.642-4.967-2.867zM12.499 10a2.92 2.92 0 002.917-2.917 2.92 2.92 0 00-2.917-2.917c-.45 0-.866.109-1.25.292.525.742.834 1.65.834 2.625 0 .975-.309 1.883-.834 2.625.384.184.8.292 1.25.292z"/></svg>',
      ifollow:
        '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 3.333A3.333 3.333 0 1110 10a3.333 3.333 0 010-6.667zM10 5a1.667 1.667 0 100 3.333A1.667 1.667 0 0010 5zm0 5.834c2.226 0 6.667 1.108 6.667 3.333v2.5H3.334v-2.5c0-2.225 4.442-3.333 6.667-3.333zm0 1.583c-2.474 0-5.083 1.216-5.083 1.75v.917h10.167v-.917c0-.534-2.608-1.75-5.083-1.75z"/></svg>',
      nobody:
        '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path clip-rule="evenodd" d="M5.834 5.833v2.5h-.833c-.89 0-1.667.647-1.667 1.528v6.944c0 .881.776 1.528 1.667 1.528h10c.89 0 1.666-.647 1.666-1.528V9.861c0-.88-.776-1.528-1.666-1.528h-.834v-2.5a4.167 4.167 0 10-8.333 0zm6.667 0v2.5h-5v-2.5a2.5 2.5 0 015 0zM5 16.667V10h10v6.666H5zm5.833-3.334a.833.833 0 11-1.667 0 .833.833 0 011.667 0z"/></svg>',
      likedmypage:
        '<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.3337 8.99935C17.3337 7.59728 16.3917 6.49935 14.8337 6.49935H12.2728L12.296 6.43624C12.3191 6.37372 12.3842 6.20223 12.4474 6.03545L12.4478 6.03443C12.5039 5.88657 12.5586 5.74259 12.5812 5.68177C12.7397 5.25648 12.8553 4.91381 12.9488 4.57446C13.0902 4.06154 13.167 3.59944 13.167 3.16601C13.167 1.93934 12.4102 1.17745 11.2906 0.851421C10.7856 0.704372 10.346 0.665939 9.83366 0.666016H9.43407L9.18388 0.977586C8.90126 1.32955 8.34615 1.96387 7.70617 2.69518C6.52554 4.04428 5.05608 5.72343 4.47562 6.56885C4.325 6.52411 4.16547 6.50009 4.00033 6.50009H2.33366C1.41318 6.50009 0.666992 7.24629 0.666992 8.16676V15.6668C0.666992 16.5872 1.41318 17.3334 2.33366 17.3334H4.00033C4.57293 17.3334 5.07808 17.0447 5.37813 16.6048C5.63094 16.7683 5.91301 16.9048 6.21959 17.0145C6.92153 17.2656 7.6177 17.3428 8.19566 17.3322L14.0003 17.3327C16.2963 17.3327 17.3337 13.9523 17.3337 8.99935ZM6.78106 15.4453C6.04363 15.1814 5.66699 14.7512 5.66699 13.9994V8.16676V8.16602C5.66699 7.96585 5.70402 7.78861 5.78508 7.59934C5.9307 7.25935 7.25194 5.75196 8.50422 4.32324C9.15053 3.58587 9.77848 2.86945 10.217 2.34529C10.4265 2.36101 10.624 2.39321 10.8246 2.45163C11.3021 2.59068 11.5003 2.7902 11.5003 3.16602C11.5003 3.42983 11.4469 3.75128 11.3421 4.13152C11.2638 4.41566 11.1623 4.71632 11.0194 5.0999C10.9992 5.15429 10.9486 5.28746 10.8949 5.42913L10.8947 5.42955L10.8947 5.42965C10.8291 5.60247 10.7588 5.7878 10.7328 5.85814C10.6244 6.15116 10.553 6.3669 10.5042 6.56294C10.2966 7.39631 10.5049 8.16602 11.5003 8.16602H14.8337C15.4097 8.16602 15.667 8.46592 15.667 8.99935C15.667 12.9916 14.8463 15.666 14.0003 15.666H8.16699L8.13621 15.6665C7.77147 15.6731 7.25918 15.6163 6.78106 15.4453ZM2.33366 15.6668V8.16676H4.00033V15.6668H2.33366Z"/></svg>',
    };
    this.simpleSelect = document.querySelectorAll('.customSelect');
    this.iconSelect = document.querySelectorAll('.customSelectIcon');
    this.avatarSelect = document.querySelectorAll('.customSelectAvatars');
  }

  createCustomSelect = (selector, config, value) => {
    if (value.length > 0) {
      $(selector).select2(config).val(value).trigger('change');
    } else {
      $(selector).select2(config);
    }
  };

  resultForListWithAvatars = (data) => {
    if (!data.id) {
      return $(`
          <div class="select2-item">
            <span>${data.text}</span>
          </div>
      `);
    }

    return $(`
        <div class="select2-item">
          <img src="${data.avatar}"
            class="select2-item__img"
            alt="Avatar of page"/>
          <span>${data.text}</span>
        </div>
    `);
  };

  formatStateIcons = (icon) => {
    if (!icon.id) {
      return icon.text;
    }

    const $icon = $(
      `<span class="privacy-settings-option">${
        this.svgIcons[icon.element.value.toLowerCase()]
      }${icon.text}</span>`
    );
    return $icon;
  };

  triggerSelect2 = (selector, func) => {
    $(selector).on('select2:select', () => {
      func();
    });
  };

  init() {
    if (this.simpleSelect.length > 0) {
      this.simpleSelect.forEach((select) => {
        $(select).select2({
          width: '100%',
          minimumResultsForSearch: -1,
        });
      });
    }

    if (this.iconSelect.length > 0) {
      this.iconSelect.forEach((select) => {
        $(select).select2({
          templateResult: this.formatStateIcons,
          templateSelection: this.formatStateIcons,
          minimumResultsForSearch: -1,
          dropdownPosition: 'below',
        });
      });
    }

    if (this.avatarSelect.length > 0) {
      this.avatarSelect.forEach((select) => {
        $(select).select2({
          templateResult: this.resultForListWithAvatars,
          dropdownPosition: 'below',
        });
      });
    }
  }
}

export default ClassSelect2;
